<!-- Start of Uncoverage widget (part 1/2) -->
<div id="modal">
  <div class="content">
    <div class="body"></div>
    <div class="footer">
      <button type="button">
        Close
      </button>
    </div>
  </div>
  <div id="modal-backdrop"></div>
</div>
<!-- End of Uncoverage widget -->


<div id="container">
  <header>
    <%= image_tag "http://s.huffpost.com/images/v/logos/bpage/politics.gif" %>
  </header>

  <nav></nav>

  <section class="journalist">

    <%= image_tag "http://s.huffpost.com/contributors/paul-blumenthal/headshot.jpg", class: "journalist_photo" %>
    <span class="name">Paul Blumenthal Become a fan</span>

    <!-- Start of Uncoverage widget (part 2/2) -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://<%= Rails.env.production? ? 'alpha.uncoverage.com' : 'localhost:3000' %>/assets/widget_modal.css">

    <script type="text/javascript">

      // Initializers //

      Uncoverage = new Object;
      Uncoverage.subscriptions = []
      Uncoverage.current_user = {id: null, logged_in: false, card: false}
      Uncoverage.windowWidth = $(window).width()

      $(document).ready(function(){$('#modal, #modal-backdrop').hide()})

      $("#modal > .content > .footer > button").click(function(e){
        Uncoverage.closePopup()})

      if ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|Playbook|IEMobile|Nexus|Opera Mini|Mobile/i).test(navigator.userAgent))
      { window.device = "handheld" } else { window.device = "desktop" }

      if ($("meta[name=viewport]").length == 0) {
        Uncoverage.viewPortPresence = false
      } else {
        Uncoverage.viewPortPresence = true
      }

      // Listener

      function receiveMessage (e) {

        Uncoverage.response = e
        Uncoverage.origin = e.origin

        if (e.data.subscription){
          Uncoverage.subscriptions.push(e.data.subscription)
        }

        if ((Uncoverage.current_user && Uncoverage.current_user.logged_in == false) || (Uncoverage.current_user && Uncoverage.current_user.logged_in == true && Uncoverage.current_user.card == false) || !Uncoverage.current_user) {
          if (e.data.user && e.data.user.logged_in ==  true){
            if (Uncoverage.current_user.logged_in == false) {
              // Widget version only
              reloadWidget()
            }
            Uncoverage.current_user = e.data.user
          }
        }

        if (e.data.action == "closePopup"){
          Uncoverage.closePopup()
        } else if (e.data.action =="getDeviceType") {
          setDeviceType()
        }

        if (e.data.windowClass) {
          $("iframe#popUp").attr("data-windowclass", e.data.windowClass)
          $("#modal").attr("data-windowclass", e.data.windowClass)
          $("#modal > .content").attr("data-windowclass", e.data.windowClass)
        }
        
        if (e.data.url){
          // Widget version only
          Uncoverage.popupShow(e.origin + e.data.url)
        }
      }

      addViewPort = function (){$("head").append("<meta name='viewport' content='width=device-width'>")}
      backViewPort = function (){$("meta[name=viewport]").attr("content", "width=" + Uncoverage.windowWidth)}

      setDeviceType = function (){
        widget = document.getElementById("popUp").contentWindow
        widget.postMessage({device: window.device}, "*")

        $("#modal").attr("data-device", window.device)
        $("#modal > .content").attr("data-device", window.device)
        $("iframe#popUp").attr("data-device", window.device)
      }

      Uncoverage.closePopup = function () {
        $('#modal, #modal-backdrop').fadeOut()
        if (Uncoverage.viewPortPresence == false){
          backViewPort()
        }
      }

      Uncoverage.popupShow = function(url) {

        if (Uncoverage.viewPortPresence == false && window.device == "handheld"){
          addViewPort()
        }

        html = "<iframe id='popUp' src='" + url + "' style='border: 0; margin: 0 auto;' marginheight='20'/></iframe>"
        $('#modal > .content > .body').html(html)
        $('#modal').fadeIn()
        $('#modal-backdrop').fadeIn()

        setDeviceType()
      }

      reloadWidget = function(){
        // Widget version only
        $("#widget").attr("src", $("#widget").attr("src"))
      }

      window.addEventListener('message', receiveMessage, false)
    </script>
  </section>

  <section id="widgetsection">
    <% if Rails.env.production? %>
      <iframe id="widget" src="http://alpha.uncoverage.com/widget?journalist_id=525dfa2887a36684d4000005&amount=100" style="border: 0"/></iframe>
    <% else %>
      <iframe id="widget" src="http://localhost:3000/widget?journalist_id=533d183e07fd34b1eb000004&amount=100" style="border: 0"/></iframe>
    <% end %>
  </section>
  <!-- end of Uncoverage widget -->

  <section>
    <h1>Stephen Colbert To IRS: Let Me Make Fun Of 'Dark Money' And Super PACs Some More</h1>
    
    <%= image_tag "http://i0.huffpost.com/gen/1651947/thumbs/n-STEPHEN-COLBERT-SUPER-PAC-large570.jpg", class: "photo" %>

    <p>WASHINGTON -- Comedian Stephen Colbert, whose gags have pointed out the absurdity of U.S. campaign finance laws since the Supreme Court's 2010 Citizens United ruling, asked the IRS Thursday for permission to testify on proposed rules governing the political activity of social welfare nonprofits.</p>

    <p>Colbert said in a comment filed with the IRS that the proposed rules "raise serious constitutional and legal issues" for social welfare nonprofits. These organizations have become known as "dark money" groups, because they allow political operatives to spend money on electoral activity without having to disclose donors.</p>

    <p>Colbert in 2011 ran segments on his Comedy Central show "The Colbert Report" exposing campaign finance absurdities through the creation of his own super PAC -- Americans for a Better Tomorrow, Tomorrow -- and a social welfare nonprofit. The Huffington Post ran a five-part series on Colbert's campaign finance exploits.</p>

    <p>Colbert officially retired his super PAC in 2012 and donated the funds raised by both organizations to two campaign finance watchdog groups, the Campaign Legal Center, founded by Colbert's lawyer Trevor Potter, and the Center for Responsive Politics.</p>

    <p>The proposed rules have attracted a whopping 143,635 comments to the IRS, with both tea party and progressive groups mobilizing supporters. Campaign finance reform supporters also have flooded the IRS with comments urging it to set a stringent and clear limit on the amount of electoral activity these groups are allowed. The Huffington Post previously examined the regulations here.</p>

    <p>Colbert's position on the lengthy and complicated proposed rules is not entirely clear. His letter simply states, "The Proposed Regulations raise serious constitutional and legal issues for Colbert Super PAC SHH Institute and other entities like it, which seek to make America a better place. I request the opportunity to discuss these issues in detail through oral testimony at a public hearing related to the Proposed Regulations."</p>
  </section>
</div>